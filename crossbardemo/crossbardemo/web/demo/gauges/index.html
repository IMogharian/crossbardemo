<!doctype html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <title>Gauges</title>
      <link rel="stylesheet" href="../../jqueryui/css/ui-lightness/jquery-ui-1.8.23.custom.css">
      <link rel="stylesheet" href="../demo.css">
      <link rel="stylesheet" href="css/gauges.css">
   </head>
   <body>
      <header>
         <div id="header_inner">
            <div id="demo_title">
               <span>Gauges</span>
            </div>
            <a class="navbar-brand" href="http://crossbar.io">
               <img src="img/crossbar_icon_inverted.png" alt="crossbar logo inverted" width="60" height="60">
               <span class="fontFace">
                  <span>Crossbar</span><span>.io</span>
               </span>
               <span class="fontFaceDemo">Demos</span>
            </a>
         </div>

      </header>

      <div class="demos-overview-link">
         <a href="#" class="tavendo-link">Demos Overview Page</a>
      </div>

      <div class="demo_links">
         <p>
            Changes to gauge state are synched across all browser tabs subscribed to the same channel.<br>
         </p>
         <p>
            <strong>Open a second instance</strong> in a new browser tab, and place these side by side to <strong>see changes synched instantly</strong>
         </p>
         <div>
            <a id="secondInstance" href="" target="_blank" class="tavendo-link">Open second instance</a>
         </div>
      </div>

      <div id="demo_body">
         <div id="bigGauge">
            <div id="g0"></div>
            <div id="s0" class="bigSlider"></div>
         </div>

         <div id="smallGauges">
            <div id="gauges">
               <div id="g1"></div>
               <div id="g2"></div>
               <div id="g3"></div>
            </div>
            <div id="eqSliders">
               <span id="s1"></span>
               <span id="s2"></span>
               <span id="s3"></span>
            </div>
            <div>
               Controller Channel: <input type="text" id="controller-channel" size="6" maxlength="6" value="{{channel}}">
               <button id="controller-channel-switch" class="button">Switch</button>
               <button id="controller-channel-cancel" class="button">Cancel</button>
            </div>
         </div>


         <div class="demo-explanation">
            <div class="demo-explanation-inner">
               <h2>
                  Demo Background
               </h2>
               <p>
                  Gauge value changes are communicated between browser tabs via Crossbar.io - the Unified Application Router. 
               </p>
               <p>
                  All tabs connect to Crossbar.io via WebSocket (persistent, low-latency, full-duplex connections). They subscribe to receive gauge value changes, and publish gauge value changes. Crossbar.io dispatches a gauge value change event to all subscribers. 
               </p>
               <p>
                  Crossbar.io provides the entire connection infrastructure, as well as serving the demo itself. It uses WAMP for its connections, an open protocol which offers both the Publish & Subscribe pattern (used by this demo) and Remote Procedure Calls to cover all application messaging needs in a single protocol.
               </p>
               <p>
                  Learn more: 
               </p>
               <ul>
                  <li>
                     <a href="" class="tavendo-link">How Crossbar.io makes real-time Web apps easy.</a>
                  </li>
                  <li>
                     <a href="" class="tavendo-link">How to get started using Crossbar.io.</a>
                  </li>
                  <li>
                     <a href="" class="tavendo-link">An introduction to the technical background of Crossbar.io.</a>                  
                  </li>

               </ul>
            </div>
         </div>


         <div class="bottom-details">
            <div class="status_line noContainer">
               Status: <span class="statusline"></span>
            </div>

            <div class="source-code-link">
               <a href="https://github.com/crossbario/crossbardemo/tree/master/web/demo/gauges" class="tavendo-link">Source Code</a>
            </div>


            <div class="built-with">
               Built with <a href="http://justgage.com/">JustGage</a>.
            </div>           

         </div>

      </div>

      <!-- jQuery -->
      <script type="text/javascript" src="../../js/jquery.min.js"></script>
      <script type="text/javascript" src="../../jqueryui/js/jquery-ui-1.8.23.custom.min.js"></script>

      <!-- JustGage -->
      <script src="../../js/raphael.2.1.0.min.js"></script>
      <script src="../../js/justgage.1.0.1.min.js"></script>

      <!-- AutobahnJS -->
      <script>
         AUTOBAHN_DEBUG = true;
      </script>
      <script src="../../js/autobahn.min.js"></script>

      <!-- Demo code -->
      <script type="text/javascript" src="../config.js"></script>
      <script type="text/javascript" src="../demo.js"></script>
      <script src="js/gauges.js"></script>


      <!-- community widget iframe -->

      <!-- general styles for the widget -->
      <link rel="stylesheet" type="text/css" href="https://demo.crossbar.io/clandeckwidget/css/parent.css" />

      <!-- local stylesheet -->
      <!--     - ensures non-Display if nothing loads -->
      <!--     - site-specific positioning of widget -->
      <style>
         #communityWidget.nonDisplay {
            display: none;
         }

         #communityWidget {
            top: 111px;
            right: 0px;
            box-shadow: 0 0 12px 2px rgba(0, 0, 0, 0.4);
         }
      </style>

      <!-- IFrame itself -->
      <iframe id="communityWidget" class="nonDisplay" src="https://demo.crossbar.io/clandeckwidget/index.html" frameborder="0"></iframe>

      <!-- the parent page connecting code -->
      <script src="https://demo.crossbar.io/clandeckwidget/js/parent.js"></script>

   </body>
</html>
